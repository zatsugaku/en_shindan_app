<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>縁診断をはじめる - あなたの縁を紐解く</title>
  <meta name="description" content="3分で分かる、あなたの縁のかたち。11の質問に答えて、あなたの縁を診断します。" />
  <script src="https://www.google.com/recaptcha/api.js?render=6LcZZBEsAAAAAOVnxuUgNRUjNzsHxaXKLyxvFIpH"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Yu Mincho", "游明朝", "YuMincho", "Hiragino Mincho ProN", "HG明朝E", "ＭＳ Ｐ明朝", serif;
      line-height: 2.0;
      color: #2d2d2d;
      background: linear-gradient(to bottom, #fafafa 0%, #ffffff 50%, #fafafa 100%);
      min-height: 100vh;
      padding: 20px 0;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .hero {
      background: linear-gradient(135deg, #2d1b4e 0%, #1a0f2e 100%);
      color: white;
      padding: 60px 40px;
      text-align: center;
      border-radius: 0;
      margin-bottom: 60px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .title {
      font-size: 36px;
      font-weight: 500;
      letter-spacing: 6px;
      margin-bottom: 20px;
    }

    .subtitle {
      font-size: 17px;
      opacity: 0.9;
      letter-spacing: 2px;
    }

    .section-title {
      font-size: 24px;
      margin-bottom: 30px;
      color: #2d1b4e;
      border-bottom: 2px solid #c9a961;
      padding-bottom: 15px;
      font-weight: 500;
      letter-spacing: 3px;
    }

    .form-section {
      background: linear-gradient(to bottom, #fafafa 0%, #ffffff 100%);
      border-left: 3px solid #c9a961;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.04);
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label {
      font-size: 16px;
      color: #555;
      letter-spacing: 0.5px;
    }

    .required {
      color: #c62828;
      margin-left: 4px;
    }

    input[type="text"],
    input[type="date"],
    select {
      padding: 14px 16px;
      border: 1px solid #ddd;
      border-radius: 0;
      font-size: 16px;
      font-family: inherit;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    input[type="date"]:focus,
    select:focus {
      outline: none;
      border-color: #c9a961;
    }

    .helper {
      font-size: 14px;
      color: #666;
      line-height: 1.8;
      letter-spacing: 0.5px;
      margin-top: 10px;
    }

    .progress-wrapper {
      margin: 30px 0;
      background: #f1f1f1;
      height: 8px;
      border-radius: 0;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #c9a961, #a08445);
      transition: width 0.4s ease;
    }

    .question-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .question-index {
      font-weight: 500;
      color: #2d1b4e;
      font-size: 18px;
      letter-spacing: 1px;
    }

    .question-text {
      font-size: 20px;
      margin: 20px 0 30px;
      line-height: 1.8;
      letter-spacing: 1px;
      color: #2d2d2d;
    }

    .option-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .option-btn {
      padding: 20px 24px;
      border: 2px solid transparent;
      color: #fff;
      border-radius: 0;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      letter-spacing: 0.5px;
      line-height: 1.8;
      text-align: left;
    }

    .option-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    .option-btn.wood {
      background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
    }

    .option-btn.fire {
      background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
    }

    .option-btn.earth {
      background: linear-gradient(135deg, #8d6e63 0%, #6d4c41 100%);
    }

    .option-btn.metal {
      background: linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%);
      color: #111;
    }

    .option-btn.water {
      background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
    }

    .error {
      color: #c62828;
      font-size: 15px;
      margin-top: 15px;
      display: none;
      letter-spacing: 0.5px;
    }

    .loading-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(4px);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }

    .loading-box {
      background: #fff;
      padding: 40px 60px;
      border-radius: 0;
      box-shadow: 0 8px 40px rgba(0,0,0,0.15);
      font-weight: 500;
      color: #2d1b4e;
      font-size: 18px;
      letter-spacing: 2px;
    }

    .back-link {
      text-align: center;
      margin-top: 40px;
    }

    .back-link a {
      color: #2d1b4e;
      text-decoration: none;
      font-size: 16px;
      letter-spacing: 1px;
      border-bottom: 1px solid #c9a961;
      padding-bottom: 2px;
      transition: all 0.3s;
    }

    .back-link a:hover {
      color: #c9a961;
    }

    footer {
      text-align: center;
      padding: 60px 20px;
      color: #666;
      font-size: 14px;
      margin-top: 80px;
      border-top: 1px solid #e0d5c7;
      letter-spacing: 1px;
    }

    @media (max-width: 600px) {
      .form-grid {
        grid-template-columns: 1fr;
      }

      .title {
        font-size: 28px;
        letter-spacing: 4px;
      }

      .hero {
        padding: 40px 20px;
      }

      .form-section {
        padding: 30px 20px;
      }

      .option-btn {
        padding: 16px 20px;
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="hero">
      <h1 class="title">縁診断</h1>
      <p class="subtitle">あなたの縁のかたちを紐解く</p>
    </header>

    <main>
      <section class="form-section">
        <h2 class="section-title">基本情報</h2>
        <div class="form-grid">
          <div class="form-row">
            <label for="lastName">苗字（ローマ字）<span class="required">*</span></label>
            <input id="lastName" type="text" placeholder="Yamada" pattern="[A-Za-z]+" required />
          </div>
          <div class="form-row">
            <label for="firstName">名前（ローマ字）<span class="required">*</span></label>
            <input id="firstName" type="text" placeholder="Taro" pattern="[A-Za-z]+" required />
          </div>
          <div class="form-row">
            <label for="birthDate">生年月日<span class="required">*</span></label>
            <input id="birthDate" type="date" required />
          </div>
          <div class="form-row">
            <label for="birthPrefecture">出生地（都道府県）<span class="required">*</span></label>
            <select id="birthPrefecture" required></select>
          </div>
          <div class="form-row">
            <label for="currentPrefecture">現在地（都道府県）<span class="required">*</span></label>
            <select id="currentPrefecture" required></select>
          </div>
        </div>
        <p class="helper">
          名前はローマ字（アルファベット）で入力してください。音韻分析に使用します。<br>
          入力した情報は診断計算にのみ使用し、保存しません。
        </p>
      </section>

      <section class="form-section">
        <div class="question-header">
          <div id="questionIndicator" class="question-index">質問 1/4</div>
          <div style="font-size: 14px; color: #666;">所要時間：約1分</div>
        </div>
        <div class="progress-wrapper">
          <div id="progressBar" class="progress-bar"></div>
        </div>
        <div id="questionText" class="question-text">読み込み中...</div>
        <div id="options" class="option-grid"></div>
        <div id="questionError" class="error"></div>
      </section>

      <div class="back-link">
        <a href="/">← トップへ戻る</a>
      </div>
    </main>

    <footer>
      &copy; 2025 縁診断. All rights reserved.
    </footer>
  </div>

  <div id="loading" class="loading-overlay">
    <div class="loading-box">診断中です…</div>
  </div>

  <script src="../js/diagnosis-logic.js"></script>
  <script type="module" src="js/diagnose.js"></script>
</body>
</html>
